(this.webpackJsonp=this.webpackJsonp||[]).push([[259],{"+/NG":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));n("JHu5"),n("3R5X"),n("XUYm");var i=n("yYHy");const a=function(e,t){document.querySelectorAll(e).forEach((function(e){return e.classList.toggle("hidden",!t)}))},r=function(e,t,n){const a=document.querySelector(e);a&&(a.action=Object(i.y)(t,n))}},"6Y0j":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getReadme"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"url"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"readme"},arguments:[{kind:"Argument",name:{kind:"Name",value:"url"},value:{kind:"Variable",name:{kind:"Name",value:"url"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"client"},arguments:[]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"html"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:78}};n.loc.source={body:"query getReadme($url: String!) {\n  readme(url: $url) @client {\n    html\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.getReadme=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"getReadme")},BLrG:function(e,t,n){"use strict";var i=n("U1Ws");t.a={methods:{timeFormatted:e=>Object(i.E)().format(e,i.gb),tooltipTitle:e=>Object(i.q)(e)}}},Hoxe:function(e,t,n){var i=n("MfoV"),a=/[\\^$.*+?()[\]{}|]/g,r=RegExp(a.source);e.exports=function(e){return(e=i(e))&&r.test(e)?e.replace(a,"\\$&"):e}},LcVr:function(e,t,n){"use strict";var i=n("ly/8"),a=n("BLrG"),r=(n("U1Ws"),{directives:{GlTooltip:i.a},mixins:[a.a],props:{time:{type:[String,Number],required:!0},tooltipPlacement:{type:String,required:!1,default:"top"},cssClass:{type:String,required:!1,default:""}},computed:{timeAgo(){return this.timeFormatted(this.time)}}}),o=n("bPvS"),s=Object(o.a)(r,(function(){var e=this;return(0,e._self._c)("time",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.viewport",value:{placement:e.tooltipPlacement},expression:"{ placement: tooltipPlacement }",modifiers:{viewport:!0}}],class:e.cssClass,attrs:{title:e.tooltipTitle(e.time),datetime:e.time}},[e._t("default",(function(){return[e._v(e._s(e.timeAgo))]}),{timeAgo:e.timeAgo})],2)}),[],!1,null,null,null);t.a=s.exports},M96W:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getProjectPath"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"projectPath"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"client"},arguments:[]}]}]}}],loc:{start:0,end:47}};n.loc.source={body:"query getProjectPath {\n  projectPath @client\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.getProjectPath=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"getProjectPath")},R8uv:function(e,t,n){"use strict";var i,a=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},r=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),o=[];function s(e){for(var t=-1,n=0;n<o.length;n++)if(o[n].identifier===e){t=n;break}return t}function l(e,t){for(var n={},i=[],a=0;a<e.length;a++){var r=e[a],l=t.base?r[0]+t.base:r[0],d=n[l]||0,c="".concat(l," ").concat(d);n[l]=d+1;var u=s(c),m={css:r[1],media:r[2],sourceMap:r[3]};-1!==u?(o[u].references++,o[u].updater(m)):o.push({identifier:c,updater:v(m,t),references:1}),i.push(c)}return i}function d(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var a=n.nc;a&&(i.nonce=a)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var o=r(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function m(e,t,n,i){var a=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=u(t,a);else{var r=document.createTextNode(a),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(r,o[t]):e.appendChild(r)}}function p(e,t,n){var i=n.css,a=n.media,r=n.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var h=null,f=0;function v(e,t){var n,i,a;if(t.singleton){var r=f++;n=h||(h=d(t)),i=m.bind(null,n,r,!1),a=m.bind(null,n,r,!0)}else n=d(t),i=p.bind(null,n,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=a());var n=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<n.length;i++){var a=s(n[i]);o[a].references--}for(var r=l(e,t),d=0;d<n.length;d++){var c=s(n[d]);0===o[c].references&&(o[c].updater(),o.splice(c,1))}n=r}}}},TIcb:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("uHfJ"),n("R0RX");var i=n("yYHy");function a(e,t){return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};return e.map((function(e){return{sha:e.commit.id,message:e.commit.message,titleHtml:e.commit_title_html,committedDate:e.commit.committed_date,commitPath:e.commit_path,fileName:e.file_name,filePath:Object(i.y)(t,e.file_name),__typename:"LogTreeCommit",...n(e)}}))}(e,t,(function(e){return{lockLabel:e.lock_label||!1}}))}},ZSrL:function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var a=(o=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),r=i.sources.map((function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"}));return[n].concat(r).concat([a]).join("\n")}var o;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},a=0;a<this.length;a++){var r=this[a][0];null!=r&&(i[r]=!0)}for(a=0;a<e.length;a++){var o=e[a];null!=o[0]&&i[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},bMec:function(e,t,n){"use strict";n.d(t,"a",(function(){return he}));var i=n("Hoxe"),a=n.n(i),r=(n("h8Et"),n("q+nE")),o=n("rP6D"),s=n("yYHy"),l=(n("JHu5"),n("3R5X"),n("XUYm"),n("+tbm")),d=n("G00o"),c={components:{BlobContentViewer:l.a},beforeRouteEnter(e,t,n){n((function(e){let{$options:t}=e;t.limitedContainerElements.forEach((function(e){return e.classList.remove(d.k)}))}))},beforeRouteLeave(e,t,n){this.$options.limitedContainerElements.forEach((function(e){return e.classList.add(d.k)})),n()},props:{path:{type:String,required:!0},projectPath:{type:String,required:!0}},limitedContainerElements:document.querySelectorAll("."+d.k)},u=n("bPvS"),m=Object(u.a)(c,(function(){return(0,this._self._c)("blob-content-viewer",{attrs:{path:this.path,"project-path":this.projectPath}})}),[],!1,null,null,null).exports,p=n("+/NG"),h=(n("0no1"),n("gdbl"),n("WmlO"),n("W9Nl"),n("hyA4")),f=n.n(h),v=n("mNEC"),g=n("e9rI"),b=n("M96W"),k=n.n(b);const y=["index","readme"],S=["ad","adoc","asciidoc","creole","markdown","md","mdown","mediawiki","mkd","mkdn","org","rdoc","rst","textile","wiki"],_=function(e){return new RegExp(`^(${y.join("|")})\\.(${S.join("|")})$`,"i").test(e.name)},w=function(e){return new RegExp(`^(${y.join("|")})(\\.txt)?$`,"i").test(e.name)};var j=n("mphk"),N=n("TIcb");let P=[],C=[];const O=function(e){return P.includes(e)},x=function(){P=[],C=[]},E=async function(e,t,n,i){if(O(i))return[];Array.from(Array(d.a)).forEach((function(e,t){return function(e){O(e)||e<0||P.push(e)}(i+t)}));return await function(e,t,n,i){if(C.includes(i)||i<0)return[];C.push(i);const a=Object(s.y)(gon.relative_url_root||"/",e,"/-/refs/",encodeURIComponent(n),"/logs_tree/",encodeURIComponent(function(e){return e.replace(/^\//,"")}(t)));return j.a.get(a,{params:{format:"json",offset:i}}).then((function(e){let{data:n}=e;return Object(N.a)(n,t)})).catch((function(){return Object(v.createAlert)({message:d.h})}))}(e,t,n,i)};var F=n("H8gz"),T=n("u1ru"),L=n("zLBL"),R=n("JmT7"),q=n("oj/M"),D=n("Skdl"),$=n("6Y0j"),A={apollo:{readme:{query:n.n($).a,variables(){return{url:this.blob.webPath}}}},components:{GlIcon:F.a,GlLink:T.a,GlLoadingIcon:L.a},directives:{SafeHtml:R.a},props:{blob:{type:Object,required:!0}},data:()=>({readme:null}),computed:{isLoading(){return this.$apollo.queries.readme.loading}},watch:{readme(e){var t=this;e&&this.$nextTick((function(){Object(q.r)(),Object(D.a)(t.$refs.readme)}))}},safeHtmlConfig:{ADD_TAGS:["copy-code"]}},I=Object(u.a)(A,(function(){var e=this,t=e._self._c;return t("article",{staticClass:"file-holder limited-width-container readme-holder"},[t("div",{staticClass:"js-file-title file-title-flex-parent"},[t("div",{staticClass:"file-header-content"},[t("gl-icon",{attrs:{name:"doc-text"}}),e._v(" "),t("gl-link",{attrs:{href:e.blob.webPath}},[t("strong",[e._v(e._s(e.blob.name))])])],1)]),e._v(" "),t("div",{staticClass:"blob-viewer",attrs:{"data-qa-selector":"blob_viewer_content",itemprop:"about"}},[e.isLoading?t("gl-loading-icon",{staticClass:"my-4 mx-auto",attrs:{size:"lg",color:"dark"}}):e.readme?t("div",{directives:[{name:"safe-html",rawName:"v-safe-html:[$options.safeHtmlConfig]",value:e.readme.html,expression:"readme.html",arg:e.$options.safeHtmlConfig}],ref:"readme"}):e._e()],1)])}),[],!1,null,null,null).exports,V=n("Fj12"),G=n("cuRJ"),M=n("t9l/"),U=Object(u.a)({},(function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{attrs:{id:"name",scope:"col"}},[e._v(e._s(e.s__("ProjectFileTree|Name")))]),e._v(" "),t("th",{staticClass:"d-none d-sm-table-cell",attrs:{id:"last-commit",scope:"col"}},[e._v(e._s(e.__("Last commit")))]),e._v(" "),t("th",{staticClass:"text-right",attrs:{id:"last-update",scope:"col"}},[e._v(e._s(e.__("Last update")))])])])}),[],!1,null,null,null).exports,H=(n("uHfJ"),n("R0RX"),n("ly/8")),B={components:{GlLoadingIcon:L.a},directives:{GlTooltip:H.a},props:{commitRef:{type:String,required:!0},path:{type:String,required:!0},loadingPath:{type:String,required:!1,default:null}},computed:{parentPath(){const e=this.path.split("/");return e.pop(),e.map((function(e){return encodeURIComponent(e)})).join("/")},parentRoute(){return{path:`/-/tree/${this.commitRef}/${this.parentPath}`}}},methods:{clickRow(){this.$router.push(this.parentRoute)}}},z=Object(u.a)(B,(function(){var e=this,t=e._self._c;return t("tr",{staticClass:"tree-item"},[t("td",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.left.viewport",modifiers:{left:!0,viewport:!0}}],staticClass:"tree-item-file-name",attrs:{title:e.__("Go to parent directory"),colspan:"3"},on:{click:function(t){return t.target!==t.currentTarget?null:e.clickRow.apply(null,arguments)}}},[e.parentPath===e.loadingPath?t("gl-loading-icon",{staticClass:"d-inline-block align-text-bottom",attrs:{size:"sm",inline:""}}):t("router-link",{attrs:{to:e.parentRoute,"aria-label":e.__("Go to parent")}},[e._v(" .. ")])],1)])}),[],!1,null,null,null).exports,J=n("F+K/"),Q=n("JBkr"),W=n("vZRN"),Y=n.n(W);let X,Z;const K={bind:(e,t)=>{let{value:n}=t;if(!Y()(n))throw TypeError("Directive value must be a function");const i=()=>{X&&(clearTimeout(X),X=void 0)};Z=()=>{e.addEventListener("mouseout",i,{passive:!0}),X=setTimeout(()=>{n(e),e.removeEventListener("mouseover",Z,!0),e.removeEventListener("mouseout",i),X=void 0},100)},e.addEventListener("mouseover",Z,{capture:!0,passive:!0})},unbind:e=>{e.removeEventListener("mouseover",Z,!0)}};var ee=n("qn5R"),te=n("LcVr"),ne=n("Zxcm"),ie=n("7VWA"),ae=n.n(ie),re={components:{GlBadge:J.a,GlLink:T.a,GlSkeletonLoader:V.a,GlLoadingIcon:L.a,GlIcon:F.a,TimeagoTooltip:te.a,FileIcon:ee.a,GlIntersectionObserver:Q.a},directives:{GlTooltip:H.a,GlHoverLoad:K,SafeHtml:R.a},mixins:[g.a,Object(ne.a)()],props:{commitInfo:{type:Object,required:!1,default:null},rowNumber:{type:Number,required:!1,default:null},totalEntries:{type:Number,required:!0},id:{type:String,required:!0},sha:{type:String,required:!0},projectPath:{type:String,required:!0},currentPath:{type:String,required:!0},name:{type:String,required:!0},path:{type:String,required:!0},mode:{type:String,required:!1,default:""},type:{type:String,required:!0},url:{type:String,required:!1,default:null},lfsOid:{type:String,required:!1,default:null},submoduleTreeUrl:{type:String,required:!1,default:null},loadingPath:{type:String,required:!1,default:""}},data:()=>({hasRowAppeared:!1,delayedRowAppear:null}),computed:{commitData(){return this.commitInfo},routerLinkTo(){const e={path:`/-/blob/${this.escapedRef}/${Object(s.i)(this.path)}`},t={path:`/-/tree/${this.escapedRef}/${Object(s.i)(this.path)}`};return this.isBlob?e:this.isFolder?t:null},isBlob(){return"blob"===this.type},isFolder(){return"tree"===this.type},isSubmodule(){return"commit"===this.type},linkComponent(){return this.isFolder||this.isBlob?"router-link":"a"},fullPath(){return this.path.replace(new RegExp(`^${a()(this.currentPath)}/`),"")},shortSha(){return this.sha.slice(0,8)},hasLockLabel(){return this.commitData&&this.commitData.lockLabel},showSkeletonLoader(){return!this.commitData&&this.hasRowAppeared}},methods:{handlePreload(){return this.isFolder?this.loadFolder():this.loadBlob()},loadFolder(){this.apolloQuery(f.a,{projectPath:this.projectPath,ref:this.ref,path:this.path,nextPageCursor:"",pageSize:d.w})},loadBlob(){this.apolloQuery(ae.a,{projectPath:this.projectPath,filePath:this.path,ref:this.ref,shouldFetchRawText:Boolean(this.glFeatures.highlightJs)})},apolloQuery(e,t){this.$apollo.query({query:e,variables:t})},rowAppeared(){var e=this;this.hasRowAppeared=!0,this.commitInfo||(this.delayedRowAppear=setTimeout((function(){return e.$emit("row-appear",e.rowNumber)}),d.q))},rowDisappeared(){clearTimeout(this.delayedRowAppear),this.hasRowAppeared=!1}},safeHtmlConfig:{ADD_TAGS:["gl-emoji"]}},oe=Object(u.a)(re,(function(){var e=this,t=e._self._c;return t("tr",{staticClass:"tree-item"},[t("td",{staticClass:"tree-item-file-name cursor-default position-relative"},[t(e.linkComponent,{directives:[{name:"gl-hover-load",rawName:"v-gl-hover-load",value:e.handlePreload,expression:"handlePreload"},{name:"gl-tooltip",rawName:"v-gl-tooltip",value:{placement:"left",boundary:"viewport"},expression:"{ placement: 'left', boundary: 'viewport' }"}],ref:"link",tag:"component",staticClass:"tree-item-link str-truncated",class:{"is-submodule":e.isSubmodule},attrs:{title:e.fullPath,to:e.routerLinkTo,href:e.url,"data-qa-selector":"file_name_link"}},[t("file-icon",{staticClass:"mr-1 position-relative text-secondary",attrs:{"file-name":e.fullPath,"file-mode":e.mode,folder:e.isFolder,submodule:e.isSubmodule,loading:e.path===e.loadingPath,"css-classes":"position-relative file-icon"}}),t("span",{staticClass:"position-relative"},[e._v(e._s(e.fullPath))])],1),e._v(" "),e.lfsOid?t("gl-badge",{staticClass:"ml-1",attrs:{variant:"muted",size:"sm","data-testid":"label-lfs"}},[e._v("LFS")]):e._e(),e._v(" "),e.isSubmodule?[e._v("\n      @ "),t("gl-link",{staticClass:"commit-sha",attrs:{href:e.submoduleTreeUrl}},[e._v(e._s(e.shortSha))])]:e._e(),e._v(" "),e.hasLockLabel?t("gl-icon",{directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip"}],staticClass:"ml-1",attrs:{title:e.commitData.lockLabel,name:"lock",size:12}}):e._e()],2),e._v(" "),t("td",{staticClass:"d-none d-sm-table-cell tree-commit cursor-default gl-text-secondary"},[e.commitData?t("gl-link",{directives:[{name:"safe-html",rawName:"v-safe-html:[$options.safeHtmlConfig]",value:e.commitData.titleHtml,expression:"commitData.titleHtml",arg:e.$options.safeHtmlConfig}],staticClass:"str-truncated-100 tree-commit-link gl-text-secondary",attrs:{href:e.commitData.commitPath,title:e.commitData.message}}):e._e(),e._v(" "),t("gl-intersection-observer",{on:{appear:e.rowAppeared,disappear:e.rowDisappeared}},[e.showSkeletonLoader?t("gl-skeleton-loader",{attrs:{lines:1}}):e._e()],1)],1),e._v(" "),t("td",{staticClass:"tree-time-ago text-right cursor-default gl-text-secondary"},[e.commitData?t("timeago-tooltip",{attrs:{time:e.commitData.committedDate}}):e._e(),e._v(" "),e.showSkeletonLoader?t("gl-skeleton-loader",{attrs:{lines:1}}):e._e()],1)])}),[],!1,null,null,null).exports,se={components:{GlSkeletonLoader:V.a,TableHeader:U,TableRow:oe,ParentRow:z,GlButton:G.a},mixins:[g.a],apollo:{projectPath:{query:k.a}},props:{commits:{type:Array,required:!1,default:function(){return[]}},path:{type:String,required:!0},entries:{type:Object,required:!1,default:function(){return{}}},isLoading:{type:Boolean,required:!0},loadingPath:{type:String,required:!1,default:""},hasMore:{type:Boolean,required:!0}},data:()=>({projectPath:"",rowNumbers:{}}),computed:{totalEntries(){return Object.values(this.entries).flat().length},tableCaption(){return this.isLoading?Object(M.h)(Object(M.a)("Loading files, directories, and submodules in the path %{path} for commit reference %{ref}"),{path:this.path,ref:this.ref}):Object(M.h)(Object(M.a)("Files, directories, and submodules in the path %{path} for commit reference %{ref}"),{path:this.path,ref:this.ref})},showParentRow(){return-1===["","/"].indexOf(this.path)}},watch:{$route:function(){this.$options.totalRowsLoaded=-1}},totalRowsLoaded:-1,methods:{showMore(){this.$emit("showMore")},generateRowNumber(e,t,n){const i=`${e}-${t}-${n}`;return this.rowNumbers[i]||0===this.rowNumbers[i]||(this.$options.totalRowsLoaded+=1,this.rowNumbers[i]=this.$options.totalRowsLoaded),this.rowNumbers[i]},getCommit(e){var t=this;return this.commits.find((function(n){return n.filePath===Object(s.y)(t.path,e)}))}}},le=Object(u.a)(se,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"tree-content-holder"},[t("div",{staticClass:"table-holder bordered-box"},[t("table",{staticClass:"table tree-table",class:{"gl-table-layout-fixed":!e.showParentRow},attrs:{"aria-label":e.tableCaption,"aria-live":"polite","data-qa-selector":"file_tree_table"}},[e._m(0),e._v(" "),t("tbody",[e.showParentRow?t("parent-row",{attrs:{"commit-ref":e.escapedRef,path:e.path,"loading-path":e.loadingPath}}):e._e(),e._v(" "),e._l(e.entries,(function(n){return e._l(n,(function(n,i){return t("table-row",e._g({key:`${n.flatPath}-${n.id}-${i}`,attrs:{id:n.id,sha:n.sha,"project-path":e.projectPath,"current-path":e.path,name:n.name,path:n.flatPath,type:n.type,url:n.webUrl||n.webPath,mode:n.mode,"submodule-tree-url":n.treeUrl,"lfs-oid":n.lfsOid,"loading-path":e.loadingPath,"total-entries":e.totalEntries,"row-number":e.generateRowNumber(n.flatPath,n.id,i),"commit-info":e.getCommit(n.name)}},e.$listeners))}))})),e._v(" "),e.isLoading?e._l(5,(function(n){return t("tr",{key:n,attrs:{"aria-hidden":"true"}},[t("td",[t("gl-skeleton-loader",{attrs:{lines:1}})],1),e._v(" "),t("td",{staticClass:"gl-display-none gl-sm-display-block"},[t("gl-skeleton-loader",{attrs:{lines:1}})],1),e._v(" "),t("td",[t("div",{staticClass:"gl-display-flex gl-lg-justify-content-end"},[t("gl-skeleton-loader",{attrs:{"equal-width-lines":!0,lines:1}})],1)])])})):e._e(),e._v(" "),e.hasMore?[t("tr",[t("td",{staticClass:"gl-p-0!",attrs:{align:"center",colspan:"3"}},[t("gl-button",{staticClass:"gl-display-flex gl-w-full gl-py-4!",attrs:{variant:"link",loading:e.isLoading},on:{click:e.showMore}},[e._v("\n                "+e._s(e.s__("ProjectFileTree|Show more"))+"\n              ")])],1)])]:e._e()],2)],1)])])}),[function(){return(0,this._self._c)("table-header")}],!1,null,null,null).exports,de={i18n:d.x,components:{FileTable:le,FilePreview:I},mixins:[g.a],apollo:{projectPath:{query:k.a}},props:{path:{type:String,required:!1,default:"/"},loadingPath:{type:String,required:!1,default:""}},data:()=>({commits:[],projectPath:"",nextPageCursor:"",pagesLoaded:1,entries:{trees:[],submodules:[],blobs:[]},isLoadingFiles:!1,isOverLimit:!1,clickedShowMore:!1,fetchCounter:0}),computed:{totalEntries(){return Object.values(this.entries).flat().length},readme(){return(e=this.entries.blobs).find(_)||e.find(w);var e},pageLimitReached(){return this.totalEntries/this.pagesLoaded>=d.v},hasShowMore(){return!this.clickedShowMore&&this.pageLimitReached}},watch:{$route:function(){this.entries.trees=[],this.entries.submodules=[],this.entries.blobs=[],this.nextPageCursor="",x(),this.fetchFiles()}},mounted(){var e=this;this.$nextTick((function(){x(),e.fetchFiles()}))},methods:{fetchFiles(){var e=this;const t=this.path||"/";return this.isLoadingFiles=!0,this.$apollo.query({query:f.a,variables:{projectPath:this.projectPath,ref:this.ref,path:t,nextPageCursor:this.nextPageCursor,pageSize:d.w}}).then((function(n){var i;let{data:a}=n;if(a.errors)throw a.errors;if(null==a||null===(i=a.project)||void 0===i||!i.repository||t!==(e.path||"/"))return;const{project:{repository:{paginatedTree:{pageInfo:r}}}}=a;e.isLoadingFiles=!1,e.entries=Object.keys(e.entries).reduce((function(t,n){return{...t,[n]:e.normalizeData(n,a.project.repository.paginatedTree.nodes[0][n])}}),{}),null!=r&&r.hasNextPage&&(e.nextPageCursor=r.endCursor,e.fetchCounter+=1,e.pageLimitReached&&!e.clickedShowMore||(e.fetchFiles(),e.clickedShowMore=!1))})).catch((function(t){let n;t.graphQLErrors&&(n=t.graphQLErrors.find((function(e){var t;return(null==e||null===(t=e.extensions)||void 0===t?void 0:t.code)===d.g})));const i=n?e.$options.i18n.gitalyError:e.$options.i18n.generalError;Object(v.createAlert)({message:i,captureError:!0})}))},normalizeData(e,t){return this.entries[e].concat(t.nodes)},hasNextPage:e=>[].concat(e.trees.pageInfo,e.submodules.pageInfo,e.blobs.pageInfo).find((function(e){let{hasNextPage:t}=e;return t})),handleRowAppear(e){O(e)||(this.loadCommitData(e),e-d.a>=0&&this.loadCommitData(e-d.a))},loadCommitData(e){E(this.projectPath,this.path,this.ref,e).then(this.setCommitData).catch((function(){}))},setCommitData(e){this.commits=this.commits.concat(e)},handleShowMore(){this.clickedShowMore=!0,this.pagesLoaded+=1,this.fetchFiles()}}},ce={components:{TreeContent:Object(u.a)(de,(function(){var e=this,t=e._self._c;return t("div",[t("file-table",{attrs:{path:e.path,entries:e.entries,"is-loading":e.isLoadingFiles,"loading-path":e.loadingPath,"has-more":e.hasShowMore,commits:e.commits},on:{showMore:e.handleShowMore,"row-appear":e.handleRowAppear}}),e._v(" "),e.readme?t("file-preview",{attrs:{blob:e.readme}}):e._e()],1)}),[],!1,null,null,null).exports},mixins:[{mixins:[g.a],apollo:{projectPath:{query:k.a}},data:()=>({projectPath:"",loadingPath:null}),beforeRouteUpdate(e,t,n){this.preload(e.params.path,n)},methods:{preload(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1?arguments[1]:void 0;return this.loadingPath=e.replace(/^\//,""),this.$apollo.query({query:f.a,variables:{projectPath:this.projectPath,ref:this.ref,path:this.loadingPath,nextPageCursor:"",pageSize:100}}).then((function(){return t()}))}}}],props:{path:{type:String,required:!1,default:"/"}},computed:{isRoot(){return"/"===this.path}},watch:{isRoot:{immediate:!0,handler:"updateElements"}},methods:{updateElements(e){Object(p.a)(".js-show-on-root",e),Object(p.a)(".js-hide-on-root",!e)}}},ue=Object(u.a)(ce,(function(){return(0,this._self._c)("tree-content",{attrs:{path:this.path,"loading-path":this.loadingPath}})}),[],!1,null,null,null).exports,me={components:{TreePage:ue},mounted(){this.updateProjectElements(!0)},beforeDestroy(){this.updateProjectElements(!1)},methods:{updateProjectElements(e){Object(p.a)(".js-show-on-project-root",e)}}},pe=Object(u.a)(me,(function(){return(0,this._self._c)("tree-page",{attrs:{path:"/"}})}),[],!1,null,null,null).exports;function he(e,t){const n={component:ue,props:function(e){var t;return{path:(null===(t=e.params.path)||void 0===t?void 0:t.replace(/^\//,""))||"/"}}},i={component:m,props:function(t){return{path:t.params.path,projectPath:e}}},r=new o.a({mode:"history",base:Object(s.y)(gon.relative_url_root||"",e),routes:[{name:"treePathDecoded",path:`(/-)?/tree/${decodeURI(t)}/:path*`,...n},{name:"treePath",path:`(/-)?/tree/${a()(t)}/:path*`,...n},{name:"blobPathDecoded",path:`(/-)?/blob/${decodeURI(t)}/:path*`,...i},{name:"blobPath",path:`(/-)?/blob/${a()(t)}/:path*`,...i},{path:"/",name:"projectRoot",component:pe}]});return r.afterEach((function(n){const i=!n.name.includes("blobPath");window.gl.webIDEPath=Object(s.R)(Object(s.y)("/",e,"edit",decodeURI(t),"-",n.params.path||"",i&&"/"))})),r}r.default.use(o.a)},hyA4:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"TreeEntry"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Entry"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sha"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"flatPath"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getPaginatedTree"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"projectPath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"path"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"ref"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"nextPageCursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"project"},arguments:[{kind:"Argument",name:{kind:"Name",value:"fullPath"},value:{kind:"Variable",name:{kind:"Name",value:"projectPath"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"paginatedTree"},arguments:[{kind:"Argument",name:{kind:"Name",value:"path"},value:{kind:"Variable",name:{kind:"Name",value:"path"}}},{kind:"Argument",name:{kind:"Name",value:"ref"},value:{kind:"Variable",name:{kind:"Name",value:"ref"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"nextPageCursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"startCursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"trees"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"TreeEntry"},directives:[]},{kind:"Field",name:{kind:"Name",value:"webPath"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"submodules"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"TreeEntry"},directives:[]},{kind:"Field",name:{kind:"Name",value:"webUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"treeUrl"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"blobs"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"TreeEntry"},directives:[]},{kind:"Field",name:{kind:"Name",value:"mode"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"webPath"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"lfsOid"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}}],loc:{start:0,end:1017}};n.loc.source={body:"fragment TreeEntry on Entry {\n  __typename\n  id\n  sha\n  name\n  flatPath\n  type\n}\n\nquery getPaginatedTree($projectPath: ID!, $path: String, $ref: String!, $nextPageCursor: String) {\n  project(fullPath: $projectPath) {\n    id\n    __typename\n    repository {\n      __typename\n      paginatedTree(path: $path, ref: $ref, after: $nextPageCursor) {\n        __typename\n        pageInfo {\n          __typename\n          endCursor\n          startCursor\n          hasNextPage\n        }\n        nodes {\n          __typename\n          trees {\n            __typename\n            nodes {\n              ...TreeEntry\n              webPath\n            }\n          }\n          submodules {\n            __typename\n            nodes {\n              ...TreeEntry\n              webUrl\n              treeUrl\n            }\n          }\n          blobs {\n            __typename\n            nodes {\n              ...TreeEntry\n              mode\n              webPath\n              lfsOid\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}function r(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var r=i[t]||new Set,o=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.TreeEntry=r(n,"TreeEntry"),e.exports.getPaginatedTree=r(n,"getPaginatedTree")},qINL:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var i=n("jyii"),a=n("UVyR"),r=n("ryFn"),o=n("qx9o"),s=n("BhOj"),l=n("G55H"),d=n("9Q7u"),c=n("SZpC"),u=n("J5OO"),m=Object(s.d)(i.P,a.M),p="__bv_modal_directive__",h=function(e){var t=e.modifiers,n=void 0===t?{}:t,i=e.arg,a=e.value;return Object(l.m)(a)?a:Object(l.m)(i)?i:Object(d.h)(n).reverse()[0]},f=function(e){return e&&Object(o.v)(e,".dropdown-menu > li, li.nav-item")&&Object(o.C)("a, button",e)||e},v=function(e){e&&"BUTTON"!==e.tagName&&(Object(o.o)(e,"role")||Object(o.E)(e,"role","button"),"A"===e.tagName||Object(o.o)(e,"tabindex")||Object(o.E)(e,"tabindex","0"))},g=function(e){var t=e[p]||{},n=t.trigger,i=t.handler;n&&i&&(Object(s.a)(n,"click",i,a.V),Object(s.a)(n,"keydown",i,a.V),Object(s.a)(e,"click",i,a.V),Object(s.a)(e,"keydown",i,a.V)),delete e[p]},b=function(e,t,n){var i=e[p]||{},l=h(t),d=f(e);l===i.target&&d===i.trigger||(g(e),function(e,t,n){var i=h(t),l=f(e);if(i&&l){var d=function(e){var a=e.currentTarget;if(!Object(o.r)(a)){var s=e.type,l=e.keyCode;"click"!==s&&("keydown"!==s||l!==r.c&&l!==r.h)||Object(c.a)(Object(u.a)(n,t)).$emit(m,i,a)}};e[p]={handler:d,target:i,trigger:l},v(l),Object(s.b)(l,"click",d,a.V),"BUTTON"!==l.tagName&&"button"===Object(o.h)(l,"role")&&Object(s.b)(l,"keydown",d,a.V)}}(e,t,n)),v(d)},k={inserted:b,updated:function(){},componentUpdated:b,unbind:g}}}]);
//# sourceMappingURL=commons-pages.projects.show-pages.projects.tree.show.15113feb.chunk.js.map