(this.webpackJsonp=this.webpackJsonp||[]).push([[134],{"1EL4":function(e,t){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getUser"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"callouts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"featureName"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:108}};i.loc.source={body:"query getUser {\n  currentUser {\n    id\n    callouts {\n      nodes {\n        featureName\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function o(e,t){for(var i=0;i<e.definitions.length;i++){var n=e.definitions[i];if(n.name&&n.name.value==t)return n}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,i){if("FragmentSpread"===t.kind)i.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&i.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,i)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,i)})),t.definitions&&t.definitions.forEach((function(t){e(t,i)}))}(e,t),n[e.name.value]=t}})),e.exports=i,e.exports.getUser=function(e,t){var i={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var r=n[t]||new Set,a=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(n[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(t){var n=o(e,t);n&&i.definitions.push(n)})),i}(i,"getUser")},"6+hW":function(e,t,i){"use strict";i("ujLG"),i("3R5X"),i("HaUQ");var n=i("lT7T"),o=i("nPFI"),r=i("u1ru"),a=i("KFH7"),s=i("t9l/"),l=i("yYHy"),d=i("Vb3e"),u=(i("WmlO"),i("W9Nl"),i("OkMp")),c=i("0X+3"),p=i("OqKX"),h=i("cuRJ"),f=i("5DNK"),m={components:{GlDropdown:u.a,GlDropdownItem:c.a,GlDropdownDivider:p.a,GlButton:h.a,GlTooltip:f.a},props:{id:{type:String,required:!1,default:""},actions:{type:Array,required:!0},selectedKey:{type:String,required:!1,default:""},category:{type:String,required:!1,default:"secondary"},variant:{type:String,required:!1,default:"default"},showActionTooltip:{type:Boolean,required:!1,default:!0}},computed:{hasMultipleActions(){return this.actions.length>1},selectedAction(){var e=this;return this.actions.find((function(t){return t.key===e.selectedKey}))||this.actions[0]}},methods:{handleItemClick(e){this.$emit("select",e.key)},handleClick(e,t){var i;return this.$emit("actionClicked",{action:e}),null===(i=e.handle)||void 0===i?void 0:i.call(e,t)}}},b=i("bPvS"),v=Object(b.a)(m,(function(){var e=this,t=e._self._c;return t("span",[e.hasMultipleActions?t("gl-dropdown",{attrs:{id:e.id,text:e.selectedAction.text,"split-href":e.selectedAction.href,variant:e.variant,category:e.category,split:"","data-qa-selector":"action_dropdown"},on:{click:function(t){return e.handleClick(e.selectedAction,t)}},scopedSlots:e._u([{key:"button-content",fn:function(){return[t("span",e._b({staticClass:"gl-dropdown-button-text"},"span",e.selectedAction.attrs,!1),[e._v("\n        "+e._s(e.selectedAction.text)+"\n      ")])]},proxy:!0}],null,!1,922357173)},[e._v(" "),e._l(e.actions,(function(i,n){return[t("gl-dropdown-item",{key:i.key,attrs:{"is-check-item":"","is-checked":i.key===e.selectedAction.key,"secondary-text":i.secondaryText,"data-qa-selector":i.key+"_menu_item","data-testid":"action_"+i.key},on:{click:function(t){return e.handleItemClick(i)}}},[t("span",{staticClass:"gl-font-weight-bold"},[e._v(e._s(i.text))])]),e._v(" "),n!=e.actions.length-1?t("gl-dropdown-divider",{key:i.key+"_divider"}):e._e()]}))],2):e.selectedAction?t("gl-button",e._b({attrs:{id:e.id,variant:e.variant,category:e.category,href:e.selectedAction.href},on:{click:function(t){return e.handleClick(e.selectedAction,t)}}},"gl-button",e.selectedAction.attrs,!1),[e._v("\n    "+e._s(e.selectedAction.text)+"\n  ")]):e._e(),e._v(" "),e.selectedAction.tooltip&&e.showActionTooltip?t("gl-tooltip",{attrs:{target:e.id}},[e._v("\n    "+e._s(e.selectedAction.tooltip)+"\n  ")]):e._e()],1)}),[],!1,null,null,null).exports,g=i("j8Yr");const y={btnText:Object(s.a)("Fork project"),title:Object(s.a)("Fork project?"),message:Object(s.a)("You canâ€™t edit files directly in this project. Fork this project and submit a merge request with your changes.")};var k={name:"ConfirmForkModal",components:{GlModal:n.a},model:{prop:"visible",event:"change"},props:{visible:{type:Boolean,required:!1,default:!1},modalId:{type:String,required:!0},forkPath:{type:String,required:!0}},computed:{btnActions(){return{cancel:{text:Object(s.a)("Cancel")},primary:{text:this.$options.i18n.btnText,attributes:{href:this.forkPath,variant:"confirm","data-qa-selector":"fork_project_button","data-method":"post"}}}}},i18n:y},w=Object(b.a)(k,(function(){var e=this,t=e._self._c;return t("gl-modal",{attrs:{visible:e.visible,"data-qa-selector":"confirm_fork_modal","modal-id":e.modalId,title:e.$options.i18n.title,"action-primary":e.btnActions.primary,"action-cancel":e.btnActions.cancel},on:{change:function(t){return e.$emit("change",t)}}},[t("p",[e._v(e._s(e.$options.i18n.message))])])}),[],!1,null,null,null).exports,S=i("Zxcm");const E={modal:{title:Object(s.a)("Enable Gitpod?"),content:Object(s.g)("Gitpod|To use Gitpod you must first enable the feature in the integrations section of your %{linkStart}user preferences%{linkEnd}."),actionCancelText:Object(s.a)("Cancel"),actionPrimaryText:Object(s.a)("Enable Gitpod")},webIdeText:Object(s.g)("WebIDE|Quickly and easily edit multiple files in your project."),webIdeTooltip:Object(s.g)("WebIDE|Quickly and easily edit multiple files in your project. Press . to open")};var _={components:{ActionsButton:v,LocalStorageSync:g.a,GlModal:n.a,GlSprintf:o.a,GlLink:r.a,GlPopover:a.a,ConfirmForkModal:w,UserCalloutDismisser:d.a},i18n:E,mixins:[Object(S.a)()],props:{isFork:{type:Boolean,required:!1,default:!1},needsToFork:{type:Boolean,required:!1,default:!1},gitpodEnabled:{type:Boolean,required:!1,default:!1},isBlob:{type:Boolean,required:!1,default:!1},showEditButton:{type:Boolean,required:!1,default:!0},showWebIdeButton:{type:Boolean,required:!1,default:!0},showGitpodButton:{type:Boolean,required:!1,default:!1},showPipelineEditorButton:{type:Boolean,required:!1,default:!1},userPreferencesGitpodPath:{type:String,required:!1,default:""},userProfileEnableGitpodPath:{type:String,required:!1,default:""},editUrl:{type:String,required:!1,default:""},pipelineEditorUrl:{type:String,required:!1,default:""},webIdeUrl:{type:String,required:!1,default:""},webIdeText:{type:String,required:!1,default:""},gitpodUrl:{type:String,required:!1,default:""},gitpodText:{type:String,required:!1,default:""},disableForkModal:{type:Boolean,required:!1,default:!1},forkPath:{type:String,required:!1,default:""},forkModalId:{type:String,required:!1,default:""},webIdePromoPopoverImg:{type:String,required:!1,default:""}},data(){return{selection:this.showPipelineEditorButton?"pipeline_editor":"webide",showEnableGitpodModal:!1,showForkModal:!1}},computed:{actions(){return[this.pipelineEditorAction,this.webIdeAction,this.editAction,this.gitpodAction].filter((function(e){return e}))},editAction(){var e=this;if(!this.showEditButton)return null;const t=this.needsToFork?{href:"#modal-confirm-fork-edit",handle:function(){e.disableForkModal?e.$emit("edit","simple"):e.showModal("showForkModal")}}:{href:this.editUrl};return{key:"edit",text:Object(s.a)("Edit"),secondaryText:Object(s.a)("Edit this file only."),tooltip:"",attrs:{"data-qa-selector":"edit_button","data-track-action":"click_consolidated_edit","data-track-label":"edit"},...t}},webIdeActionText(){return this.webIdeText?this.webIdeText:this.isBlob?Object(s.a)("Open in Web IDE"):this.isFork?Object(s.a)("Edit fork in Web IDE"):Object(s.a)("Web IDE")},webIdeAction(){var e=this;if(!this.showWebIdeButton)return null;const t=this.needsToFork?{href:"#modal-confirm-fork-webide",handle:function(){e.disableForkModal?e.$emit("edit","ide"):e.showModal("showForkModal")}}:{href:this.webIdeUrl,handle:function(t){t.preventDefault(),Object(l.Q)(e.webIdeUrl,!0)}};return{key:"webide",text:this.webIdeActionText,secondaryText:this.$options.i18n.webIdeText,tooltip:this.$options.i18n.webIdeTooltip,attrs:{"data-qa-selector":"web_ide_button","data-track-action":"click_consolidated_edit_ide","data-track-label":"web_ide"},...t}},gitpodActionText(){return this.isBlob?Object(s.a)("Open in Gitpod"):this.gitpodText||Object(s.a)("Gitpod")},computedShowGitpodButton(){return this.showGitpodButton&&this.userPreferencesGitpodPath&&this.userProfileEnableGitpodPath},pipelineEditorAction(){if(!this.showPipelineEditorButton)return null;const e=Object(s.a)("Edit, lint, and visualize your pipeline.");return{key:"pipeline_editor",text:Object(s.a)("Edit in pipeline editor"),secondaryText:e,tooltip:e,attrs:{"data-qa-selector":"pipeline_editor_button"},href:this.pipelineEditorUrl}},gitpodAction(){var e=this;if(!this.computedShowGitpodButton)return null;const t=this.gitpodEnabled?{href:this.gitpodUrl}:{handle:function(){e.showModal("showEnableGitpodModal")}},i=Object(s.a)("Launch a ready-to-code development environment for your project.");return{key:"gitpod",text:this.gitpodActionText,secondaryText:i,tooltip:i,attrs:{"data-qa-selector":"gitpod_button"},...t}},enableGitpodModalProps(){return{"modal-id":"enable-gitpod-modal",size:"sm",title:this.$options.i18n.modal.title,"action-cancel":{text:this.$options.i18n.modal.actionCancelText},"action-primary":{text:this.$options.i18n.modal.actionPrimaryText,attributes:{variant:"confirm",category:"primary",href:this.userProfileEnableGitpodPath,"data-method":"put"}}}},displayVscodeWebIdeCallout(){return this.glFeatures.vscodeWebIde&&!this.showEditButton}},mounted(){this.resetPreferredEditor()},methods:{select(e){this.selection=e},showModal(e){this[e]=!0},resetPreferredEditor(){this.glFeatures.vscodeWebIde&&!this.showEditButton&&"true"!==localStorage.getItem("gl-web-ide-button-selected-reset")&&(localStorage.setItem("gl-web-ide-button-selected","webide"),localStorage.setItem("gl-web-ide-button-selected-reset",!0),this.select("webide"))},dismissCalloutOnActionClicked(e){this.displayVscodeWebIdeCallout&&e()}},webIdeButtonId:"web-ide-link",PREFERRED_EDITOR_KEY:"gl-web-ide-button-selected"},I=Object(b.a)(_,(function(){var e=this,t=e._self._c;return t("user-callout-dismisser",{attrs:{"skip-query":!e.displayVscodeWebIdeCallout,"feature-name":"vscode_web_ide_callout"},scopedSlots:e._u([{key:"default",fn:function(i){let{dismiss:n,shouldShowCallout:o}=i;return[t("div",{staticClass:"gl-sm-ml-3"},[t("actions-button",{attrs:{id:e.$options.webIdeButtonId,actions:e.actions,"selected-key":e.selection,variant:e.isBlob?"confirm":"default",category:e.isBlob?"primary":"secondary","show-action-tooltip":!e.displayVscodeWebIdeCallout||!o},on:{select:e.select,actionClicked:function(t){return e.dismissCalloutOnActionClicked(n)}}}),e._v(" "),t("local-storage-sync",{attrs:{"storage-key":e.$options.PREFERRED_EDITOR_KEY,value:e.selection,"as-string":""},on:{input:e.select}}),e._v(" "),e.computedShowGitpodButton&&!e.gitpodEnabled?t("gl-modal",e._b({model:{value:e.showEnableGitpodModal,callback:function(t){e.showEnableGitpodModal=t},expression:"showEnableGitpodModal"}},"gl-modal",e.enableGitpodModalProps,!1),[t("gl-sprintf",{attrs:{message:e.$options.i18n.modal.content},scopedSlots:e._u([{key:"link",fn:function(i){let{content:n}=i;return[t("gl-link",{attrs:{href:e.userPreferencesGitpodPath}},[e._v(e._s(n))])]}}],null,!0)})],1):e._e(),e._v(" "),e.showWebIdeButton||e.showEditButton?t("confirm-fork-modal",{attrs:{"modal-id":e.forkModalId,"fork-path":e.forkPath},model:{value:e.showForkModal,callback:function(t){e.showForkModal=t},expression:"showForkModal"}}):e._e(),e._v(" "),e.displayVscodeWebIdeCallout?t("gl-popover",{attrs:{target:e.$options.webIdeButtonId,show:o,"css-classes":["web-ide-promo-popover"],"boundary-padding":80,"show-close-button":"",triggers:"manual"},on:{"close-button-clicked":n}},[t("img",{staticClass:"web-ide-promo-popover-illustration",attrs:{src:e.webIdePromoPopoverImg,width:"280",height:"140"}}),e._v(" "),t("div",{staticClass:"gl-mx-2"},[t("h5",{staticClass:"gl-mt-3 gl-mb-3"},[e._v(e._s(e.__("The new Web IDE")))]),e._v(" "),t("p",[e._v("\n            "+e._s(e.__("VS Code in your browser. View code and make changes from the same UI as in your local IDE."))+"\n          ")]),e._v(" "),t("gl-link",{staticClass:"gl-button btn btn-confirm block gl-mb-4 gl-mt-5",attrs:{variant:"confirm",category:"primary",target:"_blank",href:e.webIdeUrl,block:""},on:{click:function(t){return e.dismissCalloutOnActionClicked(n)}}},[e._v("\n            "+e._s(e.__("Try it out now"))+"\n          ")])],1)]):e._e()],1)]}}])})}),[],!1,null,null,null);t.a=I.exports},Ml5J:function(e,t){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"dismissUserCallout"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UserCalloutCreateInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userCalloutCreate"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userCallout"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"dismissedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"featureName"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:177}};i.loc.source={body:"mutation dismissUserCallout($input: UserCalloutCreateInput!) {\n  userCalloutCreate(input: $input) {\n    errors\n    userCallout {\n      dismissedAt\n      featureName\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function o(e,t){for(var i=0;i<e.definitions.length;i++){var n=e.definitions[i];if(n.name&&n.name.value==t)return n}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,i){if("FragmentSpread"===t.kind)i.add(t.name.value);else if("VariableDefinition"===t.kind){var n=t.type;"NamedType"===n.kind&&i.add(n.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,i)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,i)})),t.definitions&&t.definitions.forEach((function(t){e(t,i)}))}(e,t),n[e.name.value]=t}})),e.exports=i,e.exports.dismissUserCallout=function(e,t){var i={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var r=n[t]||new Set,a=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var l=s;s=new Set,l.forEach((function(e){a.has(e)||(a.add(e),(n[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(t){var n=o(e,t);n&&i.definitions.push(n)})),i}(i,"dismissUserCallout")},Vb3e:function(e,t,i){"use strict";i("ylB9"),i("3R5X"),i("XexO");var n=i("Ml5J"),o=i.n(n),r=i("1EL4"),a={name:"UserCalloutDismisser",props:{featureName:{type:String,required:!0},skipQuery:{type:Boolean,required:!1,default:!1}},data:()=>({currentUser:null,isDismissedLocal:!1,isLoadingMutation:!1,mutationError:null,queryError:null}),apollo:{currentUser:{query:i.n(r).a,update:e=>null==e?void 0:e.currentUser,result(e){this.$emit("queryResult",{...e,...this.slotProps})},error(e){this.queryError=e},skip(){return this.skipQuery}}},computed:{featureNameEnumValue(){return this.featureName.toUpperCase()},isLoadingQuery(){return this.$apollo.queries.currentUser.loading},isAnonUser(){return!(this.skipQuery||this.queryError||this.isLoadingQuery||this.currentUser)},isDismissedRemote(){var e,t,i,n=this;return(null!==(e=null===(t=this.currentUser)||void 0===t||null===(i=t.callouts)||void 0===i?void 0:i.nodes)&&void 0!==e?e:[]).some((function(e){let{featureName:t}=e;return t===n.featureNameEnumValue}))},isDismissed(){return this.isDismissedLocal||this.isDismissedRemote},slotProps(){const{dismiss:e,isAnonUser:t,isDismissed:i,isLoadingMutation:n,isLoadingQuery:o,mutationError:r,queryError:a,shouldShowCallout:s}=this;return{dismiss:e,isAnonUser:t,isDismissed:i,isLoadingMutation:n,isLoadingQuery:o,mutationError:r,queryError:a,shouldShowCallout:s}},shouldShowCallout(){return!(this.isLoadingQuery||this.isDismissed||this.queryError||this.isAnonUser)}},methods:{async dismiss(){this.isLoadingMutation=!0,this.isDismissedLocal=!0;try{var e,t;const{data:i}=await this.$apollo.mutate({mutation:o.a,variables:{input:{featureName:this.featureName}}}),n=null!==(e=null==i||null===(t=i.userCalloutCreate)||void 0===t?void 0:t.errors)&&void 0!==e?e:[];n.length>0&&this.onDismissalError(n)}catch(e){this.onDismissalError([e.message])}finally{this.isLoadingMutation=!1}},onDismissalError(e){this.mutationError=e}},render(){return this.$scopedSlots.default(this.slotProps)}},s=i("bPvS"),l=Object(s.a)(a,void 0,void 0,!1,null,null,null);t.a=l.exports},Zxcm:function(e,t,i){"use strict";t.a=function(){return{inject:{glFeatures:{from:"glFeatures",default:function(){return{}}}}}}},j8Yr:function(e,t,i){"use strict";var n=i("SEpv"),o=i.n(n),r=i("pY+i"),a=i.n(r),s={props:{storageKey:{type:String,required:!0},value:{type:[String,Number,Boolean,Array,Object],required:!1,default:""},asString:{type:Boolean,required:!1,default:!1},persist:{type:Boolean,required:!1,default:!0},clear:{type:Boolean,required:!1,default:!1}},watch:{value(e){this.persist&&this.saveValue(this.serialize(e))},clear(e){e&&localStorage.removeItem(this.storageKey)}},mounted(){const{exists:e,value:t}=this.getStorageValue();e&&!a()(t,this.value)&&this.$emit("input",t)},methods:{getStorageValue(){const e=localStorage.getItem(this.storageKey);if(null===e)return{exists:!1};try{return{exists:!0,value:this.deserialize(e)}}catch{return console.warn(`[gitlab] Failed to deserialize value from localStorage (key=${this.storageKey})`,e),{exists:!1}}},saveValue(e){localStorage.setItem(this.storageKey,e)},serialize(e){return!o()(e)&&this.asString&&console.warn("[gitlab] LocalStorageSync is saving",e,`to the key "${this.storageKey}", but it is not a string and the 'asString' prop is true. This will save and restore the stringified value rather than the original value. If this is not intended, please remove or set the 'asString' prop to false.`),this.asString?e:JSON.stringify(e)},deserialize(e){return this.asString?e:JSON.parse(e)}},render(){var e,t;return null===(e=(t=this.$scopedSlots).default)||void 0===e?void 0:e.call(t)}},l=i("bPvS"),d=Object(l.a)(s,void 0,void 0,!1,null,null,null);t.a=d.exports}}]);
//# sourceMappingURL=commons-pages.projects.blob.show-pages.projects.shared.web_ide_link-pages.projects.show-pages.projec-be9a6d69.65d94567.chunk.js.map